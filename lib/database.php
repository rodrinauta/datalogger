<?php

/*
-- Setting up the database (mysql expected)
CREATE DATABASE gpsdb;
USE gpsdb;

-- Setting up tables
CREATE TABLE IF NOT EXISTS gpsdata(
	id INTEGER PRIMARY KEY NOT NULL AUTO_INCREMENT,
	utctime VARCHAR(10) UNIQUE KEY,
	date VARCHAR(6),
	status CHAR,
	latitude VARCHAR(9),
	ns CHAR,
	longitude VARCHAR(10),
	ew CHAR,
	speed     VARCHAR(10),
	fix CHAR,
	satellites VARCHAR(2),
	altitude VARCHAR(10)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COMMENT='Datos del GPS' ;

CREATE TABLE IF NOT EXISTS sightdata(
	id INTEGER PRIMARY KEY NOT NULL AUTO_INCREMENT,
	value VARCHAR(255) NOT NULL,
	utctime VARCHAR(10),
	date VARCHAR(6),
	id_gps int(11) NOT NULL,
	FOREIGN KEY id_gps (id_gps) REFERENCES gpsdata(id) ON DELETE CASCADE ON UPDATE CASCADE 
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COMMENT='comentarios del camino puestos tras inspección visual';


CREATE TABLE IF NOT EXISTS zonaMapa (
	id INTEGER PRIMARY KEY NOT NULL AUTO_INCREMENT,
	NombreZona varchar(60) NOT NULL,
	validez polygon NOT NULL
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COMMENT='gran zona general, a partir de donde se inician las capturas' ;


CREATE TABLE IF NOT EXISTS tramoMapa (
	id INTEGER PRIMARY KEY NOT NULL AUTO_INCREMENT,
	zonaid INTEGER NOT NULL,
	NombreTramo varchar(60) NOT NULL,
	FOREIGN KEY zonaid (zonaid) REFERENCES zonaMapa (id) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COMMENT='tabla de relacion entre tramo y zona' AUTO_INCREMENT=19 ;


CREATE TABLE IF NOT EXISTS graficarMapa (
	id INTEGER PRIMARY KEY NOT NULL AUTO_INCREMENT,
	tramoid INTEGER NOT NULL,
	tramo linestring NOT NULL COMMENT 'tramo a desplegar en el mapa',
	zona polygon NOT NULL COMMENT 'zona espacial que se considera valido para ser incluido en el tramo',
	FOREIGN KEY tramoid (tramoid) REFERENCES tramoMapa (id) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COMMENT='datos a mostrar en el mapa' ;


CREATE TABLE pmdata(
	id_gps INTEGER NOT NULL,
	tsplat FLOAT,
	pm10lat FLOAT,
	pm25lat FLOAT,
	pm1lat FLOAT,
	tspavg FLOAT,
	pm10avg FLOAT,
	pm25avg FLOAT,
	pm1avg FLOAT,
	id_tramo INTEGER,
	FOREIGN KEY (id_gps) REFERENCES gpsdata(id) ON DELETE CASCADE ON UPDATE CASCADE ,
	FOREIGN KEY (id_tramo) REFERENCES tramoMapa (id) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='datos obtenidos desde el DustMate';

*/
try {
    // Raspberry Pi
    $db = new PDO('mysql:host=localhost;dbname=gpsdb;charset=utf8','root','claveEye3##');
    // Dev box
    //$db = new PDO('mysql:host=localhost;dbname=gpsdb;charset=utf8','root','nomires');


    $db->query('

SET SQL_MODE="NO_AUTO_VALUE_ON_ZERO";
SET time_zone = "+00:00";

	
CREATE TABLE IF NOT EXISTS gpsdata(
	id INTEGER PRIMARY KEY NOT NULL AUTO_INCREMENT,
	utctime VARCHAR(10),
	date VARCHAR(6),
	status CHAR,
	latitude VARCHAR(9),
	ns CHAR,
	longitude VARCHAR(10),
	ew CHAR,
	speed     VARCHAR(10),
	fix CHAR,
	satellites VARCHAR(2),
	altitude VARCHAR(10)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COMMENT="Datos del GPS" ;

CREATE TABLE IF NOT EXISTS sightdata(
	id INTEGER PRIMARY KEY NOT NULL AUTO_INCREMENT,
	value VARCHAR(255) NOT NULL,
	utctime VARCHAR(10),
	date VARCHAR(6),
	id_gps int(11) NOT NULL,
	FOREIGN KEY id_gps (id_gps) REFERENCES gpsdata(id) ON DELETE CASCADE ON UPDATE CASCADE 
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COMMENT="comentarios del camino puestos tras inspección visual";


CREATE TABLE IF NOT EXISTS zonaMapa (
	id INTEGER PRIMARY KEY NOT NULL AUTO_INCREMENT,
	NombreZona varchar(60) NOT NULL,
	validez polygon NOT NULL
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COMMENT="gran zona general, a partir de donde se inician las capturas" ;


CREATE TABLE IF NOT EXISTS tramoMapa (
	id INTEGER PRIMARY KEY NOT NULL AUTO_INCREMENT,
	zonaid INTEGER NOT NULL,
	NombreTramo varchar(60) NOT NULL,
	FOREIGN KEY zonaid (zonaid) REFERENCES zonaMapa (id) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COMMENT="tabla de relacion entre tramo y zona";


CREATE TABLE IF NOT EXISTS graficarMapa (
	id INTEGER PRIMARY KEY NOT NULL AUTO_INCREMENT,
	tramoid INTEGER NOT NULL,
	tramo linestring NOT NULL COMMENT "tramo a desplegar en el mapa",
	zona polygon NOT NULL COMMENT "zona espacial que se considera valido para ser incluido en el tramo",
	FOREIGN KEY tramoid (tramoid) REFERENCES tramoMapa (id) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COMMENT="datos a mostrar en el mapa" ;


CREATE TABLE pmdata(
	id_gps INTEGER NOT NULL,
	tsplat FLOAT,
	pm10lat FLOAT,
	pm25lat FLOAT,
	pm1lat FLOAT,
	tspavg FLOAT,
	pm10avg FLOAT,
	pm25avg FLOAT,
	pm1avg FLOAT,
	id_tramo INTEGER,
	FOREIGN KEY (id_gps) REFERENCES gpsdata(id) ON DELETE CASCADE ON UPDATE CASCADE ,
	FOREIGN KEY (id_tramo) REFERENCES tramoMapa (id) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT="datos obtenidos desde el DustMate";
');

$db->query("insert into zonaMapa (NombreZona,validez) values ( 'zona1', PolygonFromText('POLYGON(( -68.79321637892966 -20.99900094338003,-68.79443061227171 -21.00120533043547,-68.79558008636148 -21.00476436588382,-68.7974559507371 -21.00619899042006,-68.79804954184509 -21.00712214905173,-68.79807389271886 -21.00818452360433,-68.79762692158514 -21.0092599571681,-68.79641817469141 -21.00990147502833,-68.795164276512 -21.00981717764909,-68.79372243056709 -21.00960732801328,-68.792863313407 -21.00893274567374,-68.79248955066045 -21.00797477920496,-68.79219260776097 -21.00632048178567,-68.79145376822238 -21.00268512119124,-68.78909858152669 -21.00067054219836,-68.79115669457099 -20.99801535607829,-68.79321637892966 -20.99900094338003))'));
insert into tramoMapa (zonaid,NombreTramo) values ( (SELECT max(id) from zonaMapa) , 'tramo1');insert into graficarMapa (tramoid,tramo,zona) values ( (SELECT max(id) from tramoMapa), LINEFROMTEXT('LINESTRING( -68.79566451318689 -21.00661917252018,-68.79419108723455 -21.00596034215967)',0),PolygonFromText('POLYGON(( -68.79562063610868 -21.0066771144403,-68.79534847340324 -21.00653638867223,-68.79415941027271 -21.00600070449218,-68.7942237351963 -21.0059022837635,-68.79542356949949 -21.00645852484747,-68.79569023766219 -21.00659071457793,-68.79562063610868 -21.0066771144403))'));
insert into tramoMapa (zonaid,NombreTramo) values ( (SELECT max(id) from zonaMapa) , 'tramo2');insert into graficarMapa (tramoid,tramo,zona) values ( (SELECT max(id) from tramoMapa), LINEFROMTEXT('LINESTRING( -68.79639956332522 -21.00719265198913,-68.79632414661819 -21.00704011412323,-68.79626598250594 -21.00696226762581,-68.79620599030393 -21.00689704840956,-68.79614672267641 -21.0068509344558,-68.79604931770716 -21.00679966869425,-68.79598024129977 -21.00676838404935,-68.79590141336745 -21.00673545783327,-68.79580038975769 -21.00667686764699,-68.79567770936238 -21.00662302186289)',0),PolygonFromText('POLYGON(( -68.79586823624949 -21.00667053242207,-68.79607791705739 -21.00676125737773,-68.79619457748861 -21.00682416230545,-68.79627131753236 -21.00688840844721,-68.79631975420433 -21.00694445804408,-68.79636374083518 -21.00701439457602,-68.79644465741519 -21.00717639097889,-68.79635775883757 -21.0072099198458,-68.79627177211853 -21.00703949733495,-68.79618582805817 -21.00694284934544,-68.79607595265594 -21.00687506575725,-68.7959786772787 -21.00682677968653,-68.79581359243396 -21.00674941030121,-68.7956256632731 -21.00667746960609,-68.79569358292989 -21.00659104644792,-68.79586823624949 -21.00667053242207))'));
insert into tramoMapa (zonaid,NombreTramo) values ( (SELECT max(id) from zonaMapa) , 'tramo3');insert into graficarMapa (tramoid,tramo,zona) values ( (SELECT max(id) from tramoMapa), LINEFROMTEXT('LINESTRING( -68.79676318061522 -21.00803458730238,-68.79640122454623 -21.00719739617278)',0),PolygonFromText('POLYGON(( -68.79644266199767 -21.00717878206109,-68.79647921260599 -21.00727012186409,-68.79649711831878 -21.0073111061459,-68.79653430570302 -21.00739949695588,-68.79657176738155 -21.00749460335955,-68.79661232281832 -21.00758731237324,-68.79664698341657 -21.00769049061439,-68.79667962476911 -21.00777109282817,-68.79677963676035 -21.00802850365676,-68.79673908921758 -21.00804872826969,-68.79662660827687 -21.00779611495789,-68.79659429721703 -21.00772443932617,-68.79655103830108 -21.00762801118916,-68.7965217075899 -21.00756479134396,-68.79648828025428 -21.00748850392581,-68.79646042897112 -21.00742760474269,-68.79642846654218 -21.00736230073938,-68.79643161794962 -21.00736163501481,-68.79643815920049 -21.00734736988735,-68.79643476117448 -21.00733443875067,-68.79641865627959 -21.00732137449617,-68.79640954567482 -21.00732422940865,-68.79640046245851 -21.00730162424787,-68.79636061705676 -21.007211272229,-68.79644266199767 -21.00717878206109))'));
insert into tramoMapa (zonaid,NombreTramo) values ( (SELECT max(id) from zonaMapa) , 'tramo4');insert into graficarMapa (tramoid,tramo,zona) values ( (SELECT max(id) from tramoMapa), LINEFROMTEXT('LINESTRING( -68.79700385936255 -21.00764989283735,-68.7970052247652 -21.0077098715904,-68.79700489297584 -21.00775937297713,-68.79700582828114 -21.00781529465431,-68.79700384221061 -21.00791527011288,-68.79700717406139 -21.00798028698822,-68.79700803359353 -21.00805923892905,-68.79700738349445 -21.00813837870929,-68.79699732359097 -21.00818724945206,-68.79699148156885 -21.00821256131453,-68.79695670221834 -21.00822696531728,-68.79694060478522 -21.00823760745109,-68.79692027335038 -21.00824018882562,-68.79690281669161 -21.00823459049425,-68.79688531558736 -21.00822897793156,-68.79686513390203 -21.00822254695034,-68.79684489027038 -21.00821361424592,-68.79683779642568 -21.00820286054791,-68.79682704776876 -21.00818531417123,-68.79681447636084 -21.00817525504671,-68.79680605848724 -21.00814957281742,-68.79678977725027 -21.00812130133746,-68.79678091422235 -21.00809102430737,-68.79676912062476 -21.0080562852512,-68.79676196394246 -21.00803931618211)',0),PolygonFromText('POLYGON(( -68.79678301712929 -21.00803109197693,-68.7968007846259 -21.00809344343851,-68.79683372296786 -21.0081413173995,-68.79686878876159 -21.00817993144827,-68.79692461461664 -21.00819592574619,-68.79695961117282 -21.00815460689438,-68.79695041424274 -21.00810925848705,-68.79692868067994 -21.00803758146465,-68.79691280770777 -21.00793943160716,-68.7968935969016 -21.00779404470688,-68.79690115882964 -21.00763993054026,-68.79695458750257 -21.00764379608167,-68.79711335354627 -21.00763781999778,-68.79711507925066 -21.00772411316353,-68.79711431209911 -21.00781267876083,-68.79711450292349 -21.00791675662215,-68.7971150248179 -21.00796733096637,-68.79710731639044 -21.00807596972221,-68.7970967642125 -21.00812872862759,-68.79706411736775 -21.00817662326088,-68.79702045818817 -21.00822384960274,-68.79699841003385 -21.00825471940727,-68.79696605877153 -21.00827522710476,-68.79692534208519 -21.00826896323872,-68.79684919900295 -21.00825543047977,-68.79679607423265 -21.0081951775509,-68.79675968816017 -21.00811232932,-68.79674264882843 -21.00805108616569,-68.79678301712929 -21.00803109197693))'));
insert into tramoMapa (zonaid,NombreTramo) values ( (SELECT max(id) from zonaMapa) , 'tramo5');insert into graficarMapa (tramoid,tramo,zona) values ( (SELECT max(id) from tramoMapa), LINEFROMTEXT('LINESTRING( -68.79643320924559 -21.00733910300869,-68.79633613866915 -21.00736898451051,-68.79620506453706 -21.00741074514504,-68.7961242793896 -21.00744034842784,-68.79609325780933 -21.0074567198282,-68.79603525459798 -21.00749995036064,-68.79602557370981 -21.00751849429075,-68.79602285258656 -21.00755796373003,-68.79603691106091 -21.00764193891243,-68.79606028247099 -21.00775038984303,-68.79608407467164 -21.00785973468019,-68.79609995105719 -21.00789910006994,-68.79612314894803 -21.00792741119619,-68.79617147194578 -21.00794187952013)',0),PolygonFromText('POLYGON(( -68.7961616388739 -21.00796698706068,-68.7961107878545 -21.00794895811714,-68.79607068608988 -21.00790568163907,-68.79605228193516 -21.00784419346739,-68.79604622765635 -21.00781715924335,-68.79603188472898 -21.00773600107783,-68.79600840141251 -21.00762500078158,-68.79600060387497 -21.0075540303066,-68.79600370732052 -21.00751692768372,-68.79601635710249 -21.00749427322899,-68.79603434568479 -21.00747443654994,-68.79605322068841 -21.00746185892718,-68.79609961503331 -21.00743191780489,-68.79621392325898 -21.00738657221936,-68.79628302744148 -21.00736446485789,-68.79639800552074 -21.00732928805008,-68.79641808598726 -21.00732276717643,-68.79643263732453 -21.00733419539731,-68.79643728830601 -21.00734637953615,-68.79643095193828 -21.00736024752363,-68.7964091821415 -21.00736623508711,-68.7962958494257 -21.00740407500084,-68.79623068983825 -21.00742235716874,-68.79613166172125 -21.00746173025992,-68.79609199936758 -21.00748661655708,-68.7960623409097 -21.00751301139961,-68.79604711890583 -21.00754851642911,-68.79605406402658 -21.00761908671424,-68.7960781884297 -21.00772837332605,-68.79609470863632 -21.00781379538246,-68.79610394412708 -21.00784274913778,-68.79611330483232 -21.00787619129979,-68.79613905123456 -21.00789813569082,-68.79618214397807 -21.00791828364202,-68.7961616388739 -21.00796698706068))'));
insert into tramoMapa (zonaid,NombreTramo) values ( (SELECT max(id) from zonaMapa) , 'tramo6');insert into graficarMapa (tramoid,tramo,zona) values ( (SELECT max(id) from tramoMapa), LINEFROMTEXT('LINESTRING( -68.79617380016418 -21.00794203693248,-68.79623719881194 -21.00794781536894,-68.7963535520327 -21.00794854704065,-68.79642507638462 -21.00796991656477,-68.79646303495655 -21.00801327514072,-68.79648307449668 -21.00805906770695,-68.79647677640274 -21.00815569464427,-68.79647386546175 -21.00827450566926,-68.79647091792357 -21.00839907730331,-68.79648412089544 -21.00848570970058,-68.79653335790833 -21.00854840527268,-68.79657554464212 -21.00858380418683)',0),PolygonFromText('POLYGON(( -68.79654104049862 -21.00861941022205,-68.79650682498729 -21.00858265372262,-68.79644407308778 -21.00850419476537,-68.79643045071043 -21.0084110998212,-68.79643194416079 -21.00821088582191,-68.79643856815328 -21.00805812489559,-68.79642610087977 -21.00801465577476,-68.7964119812511 -21.00800430814118,-68.79638917828339 -21.00799342175809,-68.79636224555047 -21.00798911450628,-68.79629749837409 -21.0079771571068,-68.79622304516127 -21.00797536864365,-68.79616367286994 -21.00796687169204,-68.79618378268812 -21.00791836351864,-68.79630899542551 -21.00792327954578,-68.7963839001863 -21.00792969530058,-68.79645571186231 -21.00794545675359,-68.79648426592478 -21.00796603482318,-68.79650258896859 -21.00798781907909,-68.79651578836892 -21.0080113576273,-68.79652057943859 -21.00805387038143,-68.79651883284339 -21.00824931198112,-68.79651633615197 -21.0084149502673,-68.79653363818734 -21.00846860329397,-68.79657213925948 -21.0085130333082,-68.79660619193008 -21.00855476285057,-68.79654104049862 -21.00861941022205))'));
insert into tramoMapa (zonaid,NombreTramo) values ( (SELECT max(id) from zonaMapa) , 'tramo7');insert into graficarMapa (tramoid,tramo,zona) values ( (SELECT max(id) from tramoMapa), LINEFROMTEXT('LINESTRING( -68.79657745132266 -21.00858583003402,-68.79662973257162 -21.0086354882516,-68.79664624533523 -21.00869052862953,-68.79662495060748 -21.00874768550028,-68.79658356470843 -21.00878210913582,-68.79650742067285 -21.00882738962683,-68.79644202744868 -21.00886345668211,-68.79634439957981 -21.00890253204145,-68.79624261362218 -21.0089256686062,-68.79610796682837 -21.00895101665884,-68.79600666361236 -21.00894615033436,-68.79591766718262 -21.00891939128161)',0),PolygonFromText('POLYGON(( -68.7959359203422 -21.00886671312593,-68.79597188473758 -21.0088820773915,-68.79602257130513 -21.00889431490213,-68.79611229443323 -21.00890317370317,-68.79621330347108 -21.00889101916513,-68.79629705631746 -21.00887571903177,-68.79639471845978 -21.0088394465139,-68.7964730789115 -21.0087970486575,-68.79655566939879 -21.00872851478844,-68.79658198577621 -21.00867928071563,-68.79654193822988 -21.00862024113299,-68.79660783814252 -21.00855550765346,-68.79667598371903 -21.00863992091854,-68.79668374168824 -21.00873007998878,-68.79664484504153 -21.00878868298464,-68.79657647640335 -21.00884093140149,-68.7964714816972 -21.00889856290763,-68.79638394602077 -21.00893515868497,-68.79629061426282 -21.00895974070928,-68.79613374701272 -21.00897830477947,-68.79599652135323 -21.00897823932987,-68.79590146393335 -21.00896078178138,-68.7959359203422 -21.00886671312593))'));
insert into tramoMapa (zonaid,NombreTramo) values ( (SELECT max(id) from zonaMapa) , 'tramo8');insert into graficarMapa (tramoid,tramo,zona) values ( (SELECT max(id) from tramoMapa), LINEFROMTEXT('LINESTRING( -68.79591428256089 -21.00891816920095,-68.79582844866339 -21.00888601432171,-68.79576121583183 -21.00885701894768,-68.79568605973903 -21.00881970010348,-68.79561315136277 -21.00878180951785,-68.79554734860228 -21.00874275194411,-68.79546934458665 -21.00869964650606,-68.79538920094974 -21.00865231620878,-68.79530744502675 -21.00861325530692,-68.7952349009629 -21.00858077059314,-68.79515277014858 -21.00855453844487,-68.79504956184371 -21.00853536221413)',0),PolygonFromText('POLYGON(( -68.79505086942237 -21.00850601933506,-68.79509797142296 -21.00850820168787,-68.79514991427705 -21.00852095552166,-68.79524782455772 -21.00855029907734,-68.7953325384098 -21.00858168360034,-68.79537402932284 -21.0086013678004,-68.79549135814614 -21.00865393307528,-68.79558899302582 -21.00870709850243,-68.79582858742253 -21.00882354746436,-68.79593373743241 -21.00886518193688,-68.79590003936482 -21.00895953816128,-68.79577630773936 -21.00890710659819,-68.79554435093162 -21.00877843238115,-68.79544287811157 -21.00872337791204,-68.79534430944915 -21.00867422948778,-68.79529892864024 -21.0086502296528,-68.79522259602319 -21.00862307934549,-68.79514291141928 -21.00858948234633,-68.79508565358096 -21.00858109279891,-68.79504801863915 -21.00857570335352,-68.79505086942237 -21.00850601933506))'));
insert into tramoMapa (zonaid,NombreTramo) values ( (SELECT max(id) from zonaMapa) , 'tramo9');insert into graficarMapa (tramoid,tramo,zona) values ( (SELECT max(id) from tramoMapa), LINEFROMTEXT('LINESTRING( -68.79504586777865 -21.00853479578442,-68.79501933215933 -21.00853159446931,-68.79499456195758 -21.00853168207312,-68.79493246969362 -21.0085258267999,-68.79487589479248 -21.00852460036812,-68.79479051453774 -21.00851951809295,-68.79470476000779 -21.00852270806629,-68.79462131735735 -21.00851107336018,-68.79456587598682 -21.00850825997032,-68.79450143794738 -21.00849593545053,-68.79444856168445 -21.00846814020932,-68.79442350491723 -21.00843032269074,-68.79440939744069 -21.00837517524494,-68.79440263790063 -21.00831613005004,-68.79440157385535 -21.00826055786922,-68.79440352707131 -21.00820120387347,-68.79440244283531 -21.00814207162855)',0),PolygonFromText('POLYGON(( -68.7944356623432 -21.00820318019276,-68.79444142065701 -21.00835801455566,-68.7944641807638 -21.00843952858858,-68.79449614747219 -21.00845941838677,-68.79456348424995 -21.00847333189616,-68.79466524635269 -21.00848155976574,-68.79504835896476 -21.00850396870237,-68.79504554714893 -21.00857426316842,-68.79463700120115 -21.00855241976079,-68.79452260689935 -21.0085491613378,-68.79442489523977 -21.00851308719876,-68.79437228945743 -21.00844295020076,-68.79435524329016 -21.00837025720151,-68.79436251365215 -21.0082197984353,-68.79436724205715 -21.00814834384223,-68.79442763055144 -21.0081360042191,-68.7944356623432 -21.00820318019276))'));
insert into tramoMapa (zonaid,NombreTramo) values ( (SELECT max(id) from zonaMapa) , 'tramo10');insert into graficarMapa (tramoid,tramo,zona) values ( (SELECT max(id) from tramoMapa), LINEFROMTEXT('LINESTRING( -68.79440229510928 -21.00813945127024,-68.79439015153174 -21.00808350463293,-68.79437714892451 -21.00801230342905,-68.79437886777913 -21.00793834557529,-68.79437393057077 -21.0078511688158,-68.79435835484361 -21.00776119350936,-68.79434275108449 -21.00769464668284,-68.79424145337197 -21.0075966407003,-68.79411207316265 -21.00753640596188,-68.79398339525027 -21.00757511432007,-68.79396878770467 -21.00764332863026,-68.79401660823869 -21.0077008757193,-68.7940976659593 -21.00771388304558,-68.79420127285364 -21.00773009437259,-68.79432021185217 -21.00774968174763)',0),PolygonFromText('POLYGON(( -68.7944273221453 -21.008133698034,-68.79436668278338 -21.00814605256182,-68.79435187921543 -21.00809114942497,-68.79437666494431 -21.00807184533347,-68.7943745811736 -21.00804333729709,-68.79435396744587 -21.00802059947783,-68.79435108826121 -21.00797361239401,-68.79435484271862 -21.00794354166993,-68.79434819365474 -21.00785421262771,-68.7943170786087 -21.00777602993051,-68.79422982106563 -21.00776579614365,-68.79409002770066 -21.00775783886921,-68.79397071622077 -21.00774491223222,-68.79390769212016 -21.00768812395437,-68.79390304110227 -21.00759475115346,-68.79393463163311 -21.00751727644816,-68.79401991221438 -21.00749005594818,-68.79415145484134 -21.00748129161783,-68.79430958961527 -21.00754299172573,-68.79436228937148 -21.00764238679295,-68.79438966777616 -21.00774874647842,-68.79440065875131 -21.00785099686325,-68.79439986532947 -21.00793984213869,-68.79439995322976 -21.0079737214027,-68.79441105634967 -21.00804063932848,-68.7944273221453 -21.008133698034))'));
insert into tramoMapa (zonaid,NombreTramo) values ( (SELECT max(id) from zonaMapa) , 'tramo11');insert into graficarMapa (tramoid,tramo,zona) values ( (SELECT max(id) from tramoMapa), LINEFROMTEXT('LINESTRING( -68.79437311574777 -21.00805450064431,-68.79425170608083 -21.00806017011296,-68.79413867923945 -21.00806033914008,-68.79402566146599 -21.00806446057464,-68.79391520036543 -21.00806460414502,-68.79379285532792 -21.00806119010189,-68.79373519527351 -21.0080575554054,-68.79370500812284 -21.00804799561096,-68.79368543504769 -21.00803155894564,-68.7936755511482 -21.00800009806773,-68.79367166488535 -21.00794201172041,-68.79366858326429 -21.00786766071643,-68.79366442466707 -21.00781968869735,-68.79365931661201 -21.00777506896679)',0),PolygonFromText('POLYGON(( -68.79370033087895 -21.0078427879977,-68.79370676966335 -21.00795335229433,-68.79371486497851 -21.00801482984263,-68.79372698193599 -21.00802707848803,-68.79376093727318 -21.00803475061171,-68.79379031191594 -21.00803450299281,-68.79391395901433 -21.00803497210299,-68.79407282278227 -21.00803253067634,-68.79418267777074 -21.00803104273462,-68.79435329652928 -21.00802155723716,-68.79437343688542 -21.00804343423448,-68.7943751317361 -21.00807191961642,-68.79435005751999 -21.00809155691017,-68.79418013205634 -21.00809745349411,-68.79406558814868 -21.00809853403505,-68.79390502696347 -21.00809612141687,-68.79378567932078 -21.00809052219492,-68.7937234901556 -21.00808680977007,-68.79367313809304 -21.00807431979431,-68.79365020715329 -21.00803443867437,-68.79363854079524 -21.00796666105802,-68.7936289092162 -21.00785456542779,-68.79361939871161 -21.00778085529508,-68.79369894870671 -21.00776741931763,-68.79370033087895 -21.0078427879977))'));
insert into tramoMapa (zonaid,NombreTramo) values ( (SELECT max(id) from zonaMapa) , 'tramo12');insert into graficarMapa (tramoid,tramo,zona) values ( (SELECT max(id) from tramoMapa), LINEFROMTEXT('LINESTRING( -68.79365916499992 -21.00777144539614,-68.79365301559714 -21.00771854861304,-68.79365205651934 -21.00765954258207,-68.79365208358431 -21.00759656925059,-68.79365063914148 -21.00751736910352,-68.79365200991086 -21.00742577295632,-68.79365106686653 -21.0072731414358,-68.79365104913008 -21.00709578712327,-68.79365114698373 -21.00691377255179,-68.79365114825322 -21.00673870227387,-68.79365114960528 -21.00655672924249,-68.79365122647096 -21.0063918343783,-68.79365232996676 -21.00623415653987)',0),PolygonFromText('POLYGON(( -68.79369149335551 -21.00628282467102,-68.79369310894171 -21.00634822162652,-68.79369293527287 -21.00712568182252,-68.7936992185126 -21.0077653642933,-68.79361787247244 -21.00777966256964,-68.79361617295241 -21.00744533522692,-68.79360533308886 -21.00687681860365,-68.79361550342105 -21.00637458965954,-68.7936189826557 -21.00629392066738,-68.79361755874963 -21.00623916492539,-68.79369268462928 -21.00622716072795,-68.79369149335551 -21.00628282467102))'));
insert into tramoMapa (zonaid,NombreTramo) values ( (SELECT max(id) from zonaMapa) , 'tramo13');insert into graficarMapa (tramoid,tramo,zona) values ( (SELECT max(id) from tramoMapa), LINEFROMTEXT('LINESTRING( -68.7936524630983 -21.00623060219784,-68.7936522014065 -21.0061748520287,-68.79365198506096 -21.0061202081327,-68.79365777551632 -21.0060723816213,-68.79366877374784 -21.00601552039358,-68.79368284238625 -21.00597333730589,-68.79370466900798 -21.00594475233402,-68.79374927173905 -21.00590697213977,-68.79380034322684 -21.00587798029213,-68.79387213516273 -21.00581443773372,-68.79391648220536 -21.00575095765791,-68.79394182259887 -21.00566201393893,-68.79395032993682 -21.00559996309124,-68.79395045523336 -21.00552223679436,-68.79394235963775 -21.00542511272157)',0),PolygonFromText('POLYGON(( -68.79400786671363 -21.00541224587391,-68.79400733090859 -21.00547617691158,-68.79399879360707 -21.00558410294917,-68.79399043497789 -21.00565766529325,-68.79396271264862 -21.00574436935591,-68.79391080137563 -21.00581324867742,-68.79384867076374 -21.00587769667214,-68.79378818239641 -21.00592762563965,-68.79374494776744 -21.00596918029431,-68.79371119965451 -21.00602032725547,-68.79370441149455 -21.0060666855062,-68.79369700308655 -21.00614048625031,-68.79369256921071 -21.00622530307159,-68.79361660384863 -21.00623692791264,-68.79361645853197 -21.00615303611057,-68.79361972741623 -21.0060737781154,-68.79364255534303 -21.00597926956889,-68.79369048363142 -21.00591418489411,-68.79374206321407 -21.00586951966756,-68.79379452529815 -21.00583626155387,-68.79384185360372 -21.0057866037312,-68.79387807647969 -21.00574027997181,-68.7939055888754 -21.00566553822098,-68.79390736809829 -21.00560132050499,-68.79389821862193 -21.00549749169957,-68.7938883615341 -21.00543628191683,-68.79400786671363 -21.00541224587391))'));
insert into tramoMapa (zonaid,NombreTramo) values ( (SELECT max(id) from zonaMapa) , 'tramo14');insert into graficarMapa (tramoid,tramo,zona) values ( (SELECT max(id) from tramoMapa), LINEFROMTEXT('LINESTRING( -68.793942031101 -21.00542257459384,-68.79393547458547 -21.00536994439459,-68.79392486500096 -21.00527083026486,-68.79389887423301 -21.00513095721262,-68.79386420203998 -21.00499399018191,-68.79380133025542 -21.00477174157682,-68.79362036964614 -21.00407599423268,-68.79336166627523 -21.00322613883477)',0),PolygonFromText('POLYGON(( -68.79343029843332 -21.00320098552092,-68.79344654564945 -21.00326130532316,-68.79349942653005 -21.00343862804882,-68.79357735179205 -21.0036663588327,-68.79369719425264 -21.00406700800062,-68.79377879850559 -21.00441504085441,-68.79389983586356 -21.00491197239214,-68.79398511355973 -21.00524474812054,-68.79400896314296 -21.00540962624012,-68.79388744145943 -21.00543438912565,-68.7938668498844 -21.00528430937108,-68.79378307968301 -21.00494703699548,-68.79364757849876 -21.00444656094689,-68.79357034646871 -21.00412026875844,-68.793454488815 -21.0037130691345,-68.79338658526307 -21.00349459352913,-68.79332641596699 -21.00331177673964,-68.79330304268581 -21.00324786522511,-68.79343029843332 -21.00320098552092))'));
insert into tramoMapa (zonaid,NombreTramo) values ( (SELECT max(id) from zonaMapa) , 'tramo15');insert into graficarMapa (tramoid,tramo,zona) values ( (SELECT max(id) from tramoMapa), LINEFROMTEXT('LINESTRING( -68.79265540458205 -21.00094032079129,-68.79336096938582 -21.00322356341286)',0),PolygonFromText('POLYGON(( -68.79275652961951 -21.00110050581176,-68.79289778837971 -21.00149996697,-68.7930210017543 -21.00189325689767,-68.79343000034183 -21.00319882372659,-68.79330172857877 -21.00324530798189,-68.79290079681668 -21.00192675336048,-68.79278801773765 -21.00154676370607,-68.7926598422624 -21.00111806781098,-68.79260918888708 -21.0009476501899,-68.79270170588987 -21.00092483261446,-68.79275652961951 -21.00110050581176))'));
insert into tramoMapa (zonaid,NombreTramo) values ( (SELECT max(id) from zonaMapa) , 'tramo16');insert into graficarMapa (tramoid,tramo,zona) values ( (SELECT max(id) from tramoMapa), LINEFROMTEXT('LINESTRING( -68.79232468609501 -21.00009146944131,-68.79236271467852 -21.00012335220774,-68.79239154224736 -21.0001694945953,-68.79242134317576 -21.00022185866662,-68.79244296743845 -21.00028295530448,-68.79246135561603 -21.0003295919756,-68.79246923579409 -21.00036704482664,-68.79248448201061 -21.00039963958617,-68.79249304391858 -21.00043337127432,-68.79253874798513 -21.0005816569913,-68.79260197736231 -21.00077500886682,-68.7926538332644 -21.00093124797757)',0),PolygonFromText('POLYGON(( -68.79235451140363 -21.0000525211576,-68.79240938050273 -21.00011490837794,-68.79244685182263 -21.00017514122125,-68.79249092857195 -21.00026048242672,-68.79257134496687 -21.00051488642579,-68.79270191576703 -21.00092128675049,-68.79260665838491 -21.00094340205084,-68.79247519683754 -21.00053277920318,-68.79240077489328 -21.00028898695673,-68.79236477619787 -21.00020953326047,-68.79233095482984 -21.00016691107506,-68.79231680747957 -21.00015262176725,-68.79229573126953 -21.00012693562652,-68.79235451140363 -21.0000525211576))'));
insert into tramoMapa (zonaid,NombreTramo) values ( (SELECT max(id) from zonaMapa) , 'tramo17');insert into graficarMapa (tramoid,tramo,zona) values ( (SELECT max(id) from tramoMapa), LINEFROMTEXT('LINESTRING( -68.79144851496102 -20.99969168145458,-68.79149654619724 -20.99971181424803,-68.79154141739095 -20.9997340353351,-68.79158633458576 -20.9997615239503,-68.79165060457063 -20.99979882769924,-68.79172281383308 -20.9998428710047,-68.79179619095392 -20.99987972826925,-68.79187106270581 -20.99991384423112,-68.7919908100086 -20.99995396979003,-68.79208414540449 -20.99998808726217,-68.79217018422958 -21.00002025778082,-68.79224278372298 -21.00004709338026,-68.79228629213372 -21.0000672782067,-68.7923200101138 -21.00008779829612)',0),PolygonFromText('POLYGON(( -68.79142839743179 -20.99973551709041,-68.79145988454607 -20.99966692580437,-68.79154699702755 -20.9996978390571,-68.7916873671209 -20.99976673735324,-68.79178551673475 -20.99981785618716,-68.79190562041218 -20.99987723706812,-68.79207616127511 -20.99993882625494,-68.79218479469452 -20.99997832579861,-68.79226706493631 -21.00001095795012,-68.79231856766967 -21.00003209659966,-68.79235158634361 -21.0000513486203,-68.79229352903205 -21.00012570364369,-68.79223872891689 -21.0000967867988,-68.79216856324143 -21.00006181059896,-68.79208101533585 -21.00003091185072,-68.7920001485808 -21.00000211630301,-68.79188014438711 -20.99995899904335,-68.79180611981131 -20.99992621470735,-68.79171927658639 -20.99988733491898,-68.79166928497392 -20.99985669868385,-68.79161943510481 -20.99983220844155,-68.79156741778337 -20.99980366319389,-68.79149178102151 -20.99976905505306,-68.79142839743179 -20.99973551709041))'));
insert into tramoMapa (zonaid,NombreTramo) values ( (SELECT max(id) from zonaMapa) , 'tramo18');insert into graficarMapa (tramoid,tramo,zona) values ( (SELECT max(id) from tramoMapa), LINEFROMTEXT('LINESTRING( -68.79049985502252 -20.99953865826754,-68.79068486155279 -20.99957594565639,-68.79087640333235 -20.99960185491464,-68.79109371384618 -20.99961917262557,-68.79126453543444 -20.99964809105823,-68.79144795082118 -20.9996915180556)',0),PolygonFromText('POLYGON(( -68.79142798807699 -20.99973503197588,-68.79140129558159 -20.99972650403945,-68.79128977608123 -20.99969344995203,-68.79116917778447 -20.99966642559082,-68.79103738914971 -20.99966256533396,-68.79092374419155 -20.99966329513273,-68.79077943493482 -20.99964378259691,-68.79064811730846 -20.99962863400814,-68.79050363808861 -20.99960633876031,-68.7904957700859 -20.99949485534743,-68.79065420710366 -20.99952931407963,-68.79078627530073 -20.99955135004151,-68.79091735236578 -20.99956825957844,-68.79104640657725 -20.99957186390907,-68.79111883569483 -20.99957713043774,-68.79119804903206 -20.99959304872274,-68.79125181328362 -20.9996011789594,-68.79137717774658 -20.99963163489757,-68.79145909301197 -20.99966698651768,-68.79142798807699 -20.99973503197588))'));
");

} catch (PDOException $ex) {
    echo "Oh NOES! ". ($ex->getMessage());
}

?>

